"use strict";(self.webpackChunkpolity=self.webpackChunkpolity||[]).push([[671],{2671:(Ke,w,n)=>{n.r(w),n.d(w,{GroupsModule:()=>He});var c=n(6895),v=n(5593),d=n(2453),F=n(1740),E=n(8783),u=n(8492),m=n(433),x=n(7772),D=n(2665),z=n(3214),k=n(3054),H=n(6679),L=n(8271),e=n(8274);let V=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez]]}),o})();var U=n(6919),_=n(5480),M=n(989),J=n(7136);let K=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,v.hJ,d.EV,_.x,d.EV,M.n,J.R]}),o})(),j=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,d.EV,_.x,M.n,J.R]}),o})();var p=n(805),y=n(8306),q=n(9488),I=n(2545),g=n(8365),h=n(8092),S=n(9469),Q=n(9762);let P=(()=>{class o{constructor(t,s,r,a,l){this.followingGroupsService=t,this.groupsService=s,this.groupQuery=r,this.messageService=a,this.route=l,this.group$=new y.y,this.followers=[],this.followings=[],this.selectedGroupId="",this.link="",this.titleFollower="Follower",this.noDataFollower="Du hast noch keine Follower."}ngOnInit(){this.getSelectedId(),this.link=`/groups/${this.selectedGroupId}/edit`,this.groupsService.getAllFollowers(this.selectedGroupId),this.groupsService.getRealTimeChangesFollowers(this.selectedGroupId),this.getAllFollower()}getAllFollower(){console.log("called getAllFollower"),this.group$=this.groupQuery.selectEntity(this.selectedGroupId),this.group$.subscribe(t=>{t?.followers&&(console.log("called requests"),console.log(t.followers),this.followers=[],this.followers=t.followers)})}onRemoveFollower(t){console.log("onrRemove follower"),console.log("id"),console.log(t.user_id),console.log("user_id"),console.log(t.user_id),console.log("group_id"),console.log(this.selectedGroupId),this.followingGroupsService.removeFollowerTransaction(t.user_id,this.selectedGroupId).then(()=>{this.getAllFollower(),this.messageService.add({severity:"success",summary:"Follower entfernt."})}).catch(s=>{this.messageService.add({severity:"error",summary:s})})}getSelectedId(){this.route.paramMap.subscribe(t=>{this.selectedGroupId=String(t.get("id"))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q.s),e.Y36(I.J),e.Y36(g.$),e.Y36(p.ez),e.Y36(u.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-follower-group-management"]],features:[e._Bn([p.ez])],decls:8,vars:8,consts:[["styleClass","max-w-90","position","top-right"],[3,"noTopBar"],["slot","main"],[1,"mb-8"],[1,"mx-4"],["data-cy","backButton",3,"title","link"],[1,"mb-30"],[3,"dataFirstTab","dataSecondTab","titleFirstTab","noDataFirstTab","secondTabNeeded","removeItemFromFirstTab"]],template:function(t,s){1&t&&(e._UZ(0,"p-toast",0),e.TgZ(1,"app-wrapper-grid",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"app-back-button",5),e.TgZ(6,"div",6)(7,"app-tab-view-table-lists",7),e.NdJ("removeItemFromFirstTab",function(a){return s.onRemoveFollower(a)}),e.qZA()()()()()()),2&t&&(e.xp6(1),e.Q6J("noTopBar",!0),e.xp6(4),e.Q6J("title","Zur\xfcck")("link",s.link),e.xp6(2),e.Q6J("dataFirstTab",s.followers)("dataSecondTab",s.followings)("titleFirstTab",s.titleFollower)("noDataFirstTab",s.noDataFollower)("secondTabNeeded",!1))},dependencies:[d.FN,h.V,S.W,Q.r]}),o})();var T=n(9049);let W=(()=>{class o{constructor(t,s,r,a,l){this.membershipService=t,this.messageService=s,this.route=r,this.groupService=a,this.groupQuery=l,this.selectedGroupId="",this.membershipRequests=[],this.members=[],this.group$=new y.y,this.link="",this.titleMembershipRequests="Beitrittsanfragen",this.noDataMembershiprequests="Du hast aktuell keine offenen Beitrittsanfragen.",this.titleMembers="Mitglieder",this.noDataMembers="Du hast aktuell noch keine Mitglieder."}ngOnInit(){this.getSelectedId(),this.link=`/groups/${this.selectedGroupId}/edit`,this.groupService.getAllMemberShipRequests(this.selectedGroupId),this.getAllMembershipRequests(),this.groupService.getAllMembers(this.selectedGroupId),this.groupService.getRealTimeChangesMembers(this.selectedGroupId),this.groupService.getRealTimeChangesMembershipRequests(this.selectedGroupId)}getAllMembershipRequests(){this.group$=this.groupQuery.selectEntity(this.selectedGroupId),this.group$.subscribe(t=>{t?.membership_requests&&(console.log("called requests"),console.log(t.membership_requests),this.membershipRequests=[],this.membershipRequests=t.membership_requests),t?.members&&(console.log("group mebers exist from observable"),this.members=[],this.members=t.members)})}getSelectedId(){this.route.paramMap.subscribe(t=>{this.selectedGroupId=String(t.get("id"))})}acceptMembershipRequest(t){console.log("user_id"),console.log(t.user_id),console.log("group_id"),console.log(this.selectedGroupId),console.log("request_id"),console.log(t.id),this.membershipService.confirmMembershipRequest(t.user_id,this.selectedGroupId,t.id).then(()=>{this.messageService.add({severity:"success",summary:"Du hast ein neues Mitglied aufgenommen."})}).catch(s=>{this.messageService.add({severity:"error",summary:s})})}cancelMembershipRequest(t){console.log("canceld called"),console.log(t.id),this.membershipService.removeMembershipRequestById(t.id).then(s=>{console.log(s),this.messageService.add({severity:"success",summary:"Anfrage entfernt."})}).catch(s=>{this.messageService.add({severity:"error",summary:s})})}removeMember(t){console.log("user_id"),console.log(t.user_id),console.log("membership_id"),console.log(t.id),this.membershipService.removeMemberByMembershipId(t.id,t.user_id,this.selectedGroupId).then(()=>{this.messageService.add({severity:"success",summary:"Mitglied entfernt."})}).catch(s=>{this.messageService.add({severity:"error",summary:s})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.v),e.Y36(p.ez),e.Y36(u.gz),e.Y36(I.J),e.Y36(g.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-membership-group-management"]],features:[e._Bn([p.ez])],decls:8,vars:11,consts:[["styleClass","max-w-90","position","top-right"],[3,"noTopBar"],["slot","main"],[1,"mb-8"],[1,"mx-4"],["data-cy","backButton",3,"title","link"],[1,"mb-30"],[3,"dataFirstTab","titleFirstTab","noDataFirstTab","secondTabNeeded","acceptButtonNeededFirstTab","dataSecondTab","titleSecondTab","noDataSecondTab","removeItemFromFirstTab","acceptItemFromFirstTab","removeItemFromSecontTab"]],template:function(t,s){1&t&&(e._UZ(0,"p-toast",0),e.TgZ(1,"app-wrapper-grid",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"app-back-button",5),e.TgZ(6,"div",6)(7,"app-tab-view-table-lists",7),e.NdJ("removeItemFromFirstTab",function(a){return s.cancelMembershipRequest(a)})("acceptItemFromFirstTab",function(a){return s.acceptMembershipRequest(a)})("removeItemFromSecontTab",function(a){return s.removeMember(a)}),e.qZA()()()()()()),2&t&&(e.xp6(1),e.Q6J("noTopBar",!0),e.xp6(4),e.Q6J("title","Zur\xfcck")("link",s.link),e.xp6(2),e.Q6J("dataFirstTab",s.membershipRequests)("titleFirstTab",s.titleMembershipRequests)("noDataFirstTab",s.noDataMembershiprequests)("secondTabNeeded",!0)("acceptButtonNeededFirstTab",!0)("dataSecondTab",s.members)("titleSecondTab",s.titleMembers)("noDataSecondTab",s.noDataMembers))},dependencies:[d.FN,h.V,S.W,Q.r]}),o})();var A=n(7427);let b=(()=>{class o{constructor(t,s){this.groupsService=t,this.router=s}canActivate(t,s){return console.log("AlwaysAuthGuard"),this.groupsService.isLoggedInUserAdmin(t.params.id).then(l=>!!l.data.is_admin||(this.router.navigate(["/groups"]),!1)).catch(()=>!1)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(A.J),e.LFG(u.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var f=n(9028),R=n(5861);function Z(o){return[{label:"\xdcBERSICHT",routerLink:[`/groups/${o}`],routerLinkActiveOptions:{exact:!0},id:"overview-cy"}]}function N(o){return[{label:"\xdcBERSICHT",routerLink:[`/groups/${o}`],routerLinkActiveOptions:{exact:!0},id:"overview-cy"},{label:"\xc4NDERN",routerLink:[`/groups/${o}/edit`],routerLinkActiveOptions:{exact:!0},id:"edit-cy"}]}function C(o){return[{icon:"pi pi-fw pi-home",routerLink:[`/groups/${o}`],routerLinkActiveOptions:{exact:!0},id:"overview-cy"}]}function O(o){return[{icon:"pi pi-fw pi-home",routerLink:[`/groups/${o}`],routerLinkActiveOptions:{exact:!0},id:"overview-cy-mob"},{icon:"pi pi-fw pi-user-edit",routerLink:[`/groups/${o}/edit`],routerLinkActiveOptions:{exact:!0},id:"edit-cy-mob"}]}var X=n(9338);function ee(o,i){if(1&o&&e._UZ(0,"p-avatar",28),2&o){const t=e.oxw(2);e.Q6J("image",t.group.avatar_url)}}function te(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"form",8,9)(2,"h5"),e._uU(3,"Pers\xf6nliche Daten"),e.qZA(),e.TgZ(4,"div",10)(5,"div",11)(6,"span",12)(7,"textarea",13,14),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.group.description=r)}),e.qZA(),e.TgZ(9,"label",15),e._uU(10,"\xdcber mich"),e.qZA()()(),e.TgZ(11,"div")(12,"h5"),e._uU(13,"group Foto"),e.qZA(),e.YNc(14,ee,1,1,"p-avatar",16),e.TgZ(15,"p-fileUpload",17,18),e.NdJ("uploadHandler",function(r){e.CHM(t);const a=e.MAs(16),l=e.oxw();return e.KtG(l.updateGroupPhoto(r,a))}),e.qZA()()(),e.TgZ(17,"h5"),e._uU(18,"Kontaktm\xf6glichkeiten"),e.qZA(),e.TgZ(19,"div",10)(20,"div",19)(21,"span",12)(22,"input",20),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.group.contact_email=r)}),e.qZA(),e.TgZ(23,"label",15),e._uU(24,"Email"),e.qZA()()(),e.TgZ(25,"div",19)(26,"span",12)(27,"input",21),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.group.contact_phone=r)}),e.qZA(),e.TgZ(28,"label",15),e._uU(29,"Phone"),e.qZA()()()(),e.TgZ(30,"h5"),e._uU(31,"Adresse"),e.qZA(),e.TgZ(32,"div",10)(33,"div",19)(34,"span",12)(35,"input",22),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.group.street=r)}),e.qZA(),e.TgZ(36,"label",15),e._uU(37,"Street"),e.qZA()()(),e.TgZ(38,"div",19)(39,"span",12)(40,"input",23),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.group.post_code=r)}),e.qZA(),e.TgZ(41,"label",15),e._uU(42,"Post Code"),e.qZA()()(),e.TgZ(43,"div",19)(44,"span",12)(45,"input",24),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.group.city=r)}),e.qZA(),e.TgZ(46,"label",15),e._uU(47,"City"),e.qZA()()()(),e.TgZ(48,"div",25)(49,"div",26)(50,"button",27),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateGroup(r.group))}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(7),e.Q6J("autoResize",!0)("ngModel",t.group.description),e.xp6(7),e.Q6J("ngIf",t.group.avatar_url),e.xp6(1),e.Q6J("auto",!0)("customUpload",!0),e.xp6(7),e.Q6J("ngModel",t.group.contact_email),e.xp6(5),e.Q6J("ngModel",t.group.contact_phone),e.xp6(8),e.Q6J("ngModel",t.group.street),e.xp6(5),e.Q6J("ngModel",t.group.post_code),e.xp6(5),e.Q6J("ngModel",t.group.city),e.xp6(5),e.s9C("label",t.loading?"Loading ...":"Update"),e.Q6J("disabled",t.loading)}}let oe=(()=>{class o{constructor(t,s,r,a,l){this.route=t,this.groupsService=s,this.groupQuery=r,this.messageService=a,this.storageService=l,this.menuItems=[],this.menuItemsMega=[],this.selectedGroupId="",this.backLink="",this.loading=!1,this.uploading=!1,this.group$=new y.y}ngOnInit(){this.getSelectedId(),this.selectedGroupId&&(this.getGroupById(this.selectedGroupId),this.menuItemsMega=C(this.selectedGroupId),this.menuItems=Z(this.selectedGroupId),this.backLink=`/groups/${this.selectedGroupId}/edit`),this.group={...this.group}}getSelectedId(){this.route.paramMap.subscribe(t=>{this.selectedGroupId=String(t.get("id"))})}getGroupById(t){console.log("called"),this.group$=this.groupQuery.selectEntity(t),this.group$.subscribe(s=>{console.log("inner"),s&&(console.log(s),this.group={id:s.id,created_at:s.created_at,name:s.name,description:s.description,creator:s.creator,member_counter:s.member_counter,events_counter:s.events_counter,level:s.level,street:s.street,post_code:s.post_code,city:s.city,contact_phone:s.contact_phone,avatar_url:s.avatar_url,follower_counter:s.follower_counter,amendment_counter:s.amendment_counter,contact_email:s.contact_email,updated_at:s.updated_at},console.log(this.group))})}updateGroup(t,s){var r=this;return(0,R.Z)(function*(){console.log(t),console.log(s);try{r.loading=!0,yield r.groupsService.updateGroup(t,s),r.messageService.add({severity:"success",summary:"Update erfolgreich."})}catch(a){r.messageService.add({severity:"error",summary:a})}finally{r.loading=!1}})()}updateGroupPhoto(t,s){var r=this;return(0,R.Z)(function*(){if(r.group)try{r.uploading=!0;const a=r.storageService.createFilePath(t);try{const l=yield r.storageService.uploadImg(a,r.group.avatar_url||void 0,"avatars");r.group.avatar_url=l,r.updateGroup({avatar_url:l},r.selectedGroupId),s.clear(),r.messageService.add({severity:"success",summary:"Upload des Avatars war erfolgreich."})}catch(l){r.messageService.add({severity:"error",summary:l})}}catch(a){r.messageService.add({severity:"error",summary:a.message})}finally{r.uploading=!1}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.gz),e.Y36(I.J),e.Y36(g.$),e.Y36(p.ez),e.Y36(X.V))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-group"]],features:[e._Bn([p.ez])],decls:9,vars:4,consts:[["styleClass","max-w-90","position","top-right"],[3,"noTopBar"],["slot","main"],[1,"mb-8"],[1,"mx-4"],["data-cy","backButton",3,"title","link"],["class","mt-4",4,"ngIf"],["slot","side"],[1,"mt-4"],["editGroupForm","ngForm"],[1,"grid"],[1,"col-12"],[1,"p-float-label"],["name","description","pInputTextarea","","data-cy","about",1,"w-full",3,"autoResize","ngModel","ngModelChange"],["about",""],["for","float-input"],[3,"image",4,"ngIf"],["name","myfile[]","accept","image/*","data-cy","",1,"full-w",3,"auto","customUpload","uploadHandler"],["fileUploader",""],[1,"col-12","md:col-6"],["type","email","name","contact_email","pInputText","","data-cy","contactEmail",1,"w-full",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","contact_phone","data-cy","contactPhone",1,"w-full",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","street","data-cy","street",1,"w-full",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","post_code","data-cy","postCode",1,"w-full",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","city","data-cy","city",1,"w-full",3,"ngModel","ngModelChange"],[1,"flex","flex-column"],[1,"flex","align-items-center","justify-content-center"],["pButton","","type","button","data-cy","updateGroupInformationButton",3,"label","disabled","click"],[3,"image"]],template:function(t,s){1&t&&(e.TgZ(0,"p-toast",0),e._uU(1,">"),e.qZA(),e.TgZ(2,"app-wrapper-grid",1)(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"app-back-button",5),e.YNc(7,te,51,12,"form",6),e.qZA()()(),e._UZ(8,"div",7),e.qZA()),2&t&&(e.xp6(2),e.Q6J("noTopBar",!0),e.xp6(4),e.Q6J("title","Zur\xfcck")("link",s.backLink),e.xp6(1),e.Q6J("ngIf",s.group&&void 0!==s.group))},dependencies:[c.O5,m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,v.Hq,d.FN,F.o,k.g,L.q,U.p,h.V,S.W]}),o})();var Y=n(4479),B=n(4524),se=n(6355),ie=n(3078);let re=(()=>{class o{constructor(t,s){this.route=t,this.groupsQuery=s,this.menuItemsSpecial=[],this.menuItemsStandart=[],this.menuItemsMegaSpecial=[],this.menuItemsMegaStandart=[],this.selectedGroupId="",this.editOverviewLink="",this.editFollowerLink="",this.editMembersLink=""}ngOnInit(){console.log("reached"),this.getSelectedId(),this.selectedGroupId&&(this.menuItemsSpecial=N(this.selectedGroupId),this.menuItemsStandart=Z(this.selectedGroupId),this.menuItemsMegaSpecial=O(this.selectedGroupId),this.menuItemsMegaStandart=C(this.selectedGroupId),this.editOverviewLink=`/groups/${this.selectedGroupId}/edit-overview`,this.editFollowerLink=`/groups/${this.selectedGroupId}/edit-follower`,this.editMembersLink=`/groups/${this.selectedGroupId}/edit-members`,this.groupsQuery.selectUI$(this.selectedGroupId).subscribe(t=>{console.log(t),console.log("query is following test"),console.log(t?.isFollowing),t&&(this.groupUI=t)}))}getSelectedId(){this.route.paramMap.subscribe(t=>{this.selectedGroupId=String(t.get("id"))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.gz),e.Y36(g.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit"]],decls:11,vars:13,consts:[[3,"megaMenuItemSpecial","megaMenuItemStandart","specialOrStandart"],["slot","main"],[1,"mb-8"],[1,"mx-4"],[3,"headline"],["data-cy","group-edit",3,"title","link"],["data-cy","follower-edit",3,"title","link"],["data-cy","members-edit",3,"title","link"],["slot","side"],[3,"menuItemsSpecial","menuItemsStandart","specialOrStandart"]],template:function(t,s){1&t&&(e._UZ(0,"app-menu-bar-secondary-top",0),e.TgZ(1,"app-wrapper-grid")(2,"div",1)(3,"div",2)(4,"div",3),e._UZ(5,"app-headline-of-list",4)(6,"app-list-element",5)(7,"app-list-element",6)(8,"app-list-element",7),e.qZA()()(),e.TgZ(9,"div",8),e._UZ(10,"app-menu-bar-secondary-right",9),e.qZA()()),2&t&&(e.Q6J("megaMenuItemSpecial",s.menuItemsMegaSpecial)("megaMenuItemStandart",s.menuItemsMegaStandart)("specialOrStandart",s.groupUI.isAdmin),e.xp6(5),e.Q6J("headline","INHALTE"),e.xp6(1),e.Q6J("title","\xdcbersicht bearbeiten")("link",s.editOverviewLink),e.xp6(1),e.Q6J("title","Follower-Management")("link",s.editFollowerLink),e.xp6(1),e.Q6J("title","Mitglieder-Management")("link",s.editMembersLink),e.xp6(2),e.Q6J("menuItemsSpecial",s.menuItemsSpecial)("menuItemsStandart",s.menuItemsStandart)("specialOrStandart",s.groupUI.isAdmin))},dependencies:[Y.e,B.U,h.V,se.g,ie.d]}),o})();function ne(o,i){if(1&o&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}const G=function(o){return["/groups",o]};function ae(o,i){1&o&&(e.TgZ(0,"a",11)(1,"p-messages",12),e.YNc(2,ne,2,1,"ng-template",13),e.qZA()()),2&o&&e.Q6J("routerLink",e.VKq(1,G,i.$implicit.id))}function le(o,i){1&o&&(e.TgZ(0,"p"),e._uU(1,"Du bist in noch keinen lokalen Gruppen"),e.qZA())}function pe(o,i){if(1&o&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}function ue(o,i){1&o&&(e.TgZ(0,"a",11)(1,"p-messages",12),e.YNc(2,pe,2,1,"ng-template",13),e.qZA()()),2&o&&e.Q6J("routerLink",e.VKq(1,G,i.$implicit.id))}function ce(o,i){1&o&&(e.TgZ(0,"p"),e._uU(1,"Du bist in noch keinen regionalen Gruppen"),e.qZA())}function de(o,i){if(1&o&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}function me(o,i){1&o&&(e.TgZ(0,"a",11)(1,"p-messages",12),e.YNc(2,de,2,1,"ng-template",13),e.qZA()()),2&o&&e.Q6J("routerLink",e.VKq(1,G,i.$implicit.id))}function ge(o,i){1&o&&(e.TgZ(0,"p"),e._uU(1,"Du bist in noch keinen Gruppen des Bundes"),e.qZA())}function he(o,i){if(1&o&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}function fe(o,i){1&o&&(e.TgZ(0,"a",11)(1,"p-messages",12),e.YNc(2,he,2,1,"ng-template",13),e.qZA()()),2&o&&e.Q6J("routerLink",e.VKq(1,G,i.$implicit.id))}function ve(o,i){1&o&&(e.TgZ(0,"p"),e._uU(1,"Du bist in noch keinen internationalen Gruppen"),e.qZA())}let Ie=(()=>{class o{constructor(t){this.groupsService=t,this.localGroupList=[],this.regionalGroupList=[],this.federalGroupList=[],this.internationalGroupList=[]}ngOnInit(){this.getAllGroups()}getAllGroups(){this.groupsService.getAllGroupsOfId().then(t=>{t.data.forEach(s=>{let r={id:s.group_id,name:s.groups.name,level:s.groups.level,creator:s.groups.creator,description:s.groups.description,street:"",post_code:"",city:"",contact_phone:"",contact_email:"",avatar_url:""};switch(r.level){case"local":this.localGroupList.push(r);break;case"regional":this.regionalGroupList.push(r);break;case"federal":this.federalGroupList.push(r);break;case"international":this.internationalGroupList.push(r)}})}).catch(t=>{console.log(t)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.J))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-my-groups-list"]],decls:29,vars:9,consts:[[3,"noTopBar"],["slot","main"],[1,"mb-8"],[1,"mx-4"],[1,"flex","flex-row"],[1,"pi","pi-angle-down","align-items-center","flex","justify-content-center","mr-4","on-dark-surface-in-dark-theme"],[1,"onSurface","flex","align-items-center","justify-content-center"],[3,"routerLink",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","align-items-center","justify-content-center"],["slot","side"],[3,"routerLink"],["severity","custom"],["pTemplate",""],[1,"ml-2"]],template:function(t,s){1&t&&(e.TgZ(0,"app-wrapper-grid",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"i",5),e.TgZ(6,"h4",6),e._uU(7,"LOKALE"),e.qZA()(),e.YNc(8,ae,3,3,"a",7),e.YNc(9,le,2,0,"p",8),e.TgZ(10,"div",4),e._UZ(11,"i",5),e.TgZ(12,"h4",9),e._uU(13,"REGIONALE"),e.qZA()(),e.YNc(14,ue,3,3,"a",7),e.YNc(15,ce,2,0,"p",8),e.TgZ(16,"div",4),e._UZ(17,"i",5),e.TgZ(18,"h4",9),e._uU(19,"BUND"),e.qZA()(),e.YNc(20,me,3,3,"a",7),e.YNc(21,ge,2,0,"p",8),e.TgZ(22,"div",4),e._UZ(23,"i",5),e.TgZ(24,"h4",9),e._uU(25,"INTERNATIONAL"),e.qZA()(),e.YNc(26,fe,3,3,"a",7),e.YNc(27,ve,2,0,"p",8),e.qZA()()(),e._UZ(28,"div",10),e.qZA()),2&t&&(e.Q6J("noTopBar",!0),e.xp6(8),e.Q6J("ngForOf",s.localGroupList),e.xp6(1),e.Q6J("ngIf",0===s.localGroupList.length),e.xp6(5),e.Q6J("ngForOf",s.regionalGroupList),e.xp6(1),e.Q6J("ngIf",0===s.regionalGroupList.length),e.xp6(5),e.Q6J("ngForOf",s.federalGroupList),e.xp6(1),e.Q6J("ngIf",0===s.federalGroupList.length),e.xp6(5),e.Q6J("ngForOf",s.internationalGroupList),e.xp6(1),e.Q6J("ngIf",0===s.internationalGroupList.length))},dependencies:[c.sg,c.O5,u.yS,p.jx,x.V,h.V],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#000}app-menu-bar-left[_ngcontent-%COMP%]{display:none}"]}),o})();var ye=n(6923);let be=(()=>{class o{constructor(t,s,r,a,l){this.messageService=t,this.membershipService=s,this.authentificationQuery=r,this.groupsQuery=a,this.groupsService=l,this.selectedGroupId=""}ngOnInit(){this.membershipService.getRealTimeChangesIfStillMembershipRequested(this.selectedGroupId),this.membershipService.getRealTimeChangesIfStillMember(this.selectedGroupId),this.checkIfMembershipAlreadyRequested(),this.checkIfAlreadyMember(),this.groupsQuery.selectUI$(this.selectedGroupId).subscribe(t=>{t&&(this.groupUI=t,console.log(this.groupUI))})}checkIfMembershipAlreadyRequested(){this.selectedGroupId&&this.membershipService.membershipAlreadyRequested(this.selectedGroupId).then(t=>{this.groupsService.updateRequestedMembership(this.selectedGroupId,void 0!==t.data[0])}).catch()}checkIfAlreadyMember(){this.selectedGroupId&&this.membershipService.alreadyMember(this.selectedGroupId).then(t=>{this.groupsService.updateIsMember(this.selectedGroupId,void 0!==t.data[0])}).catch()}requestMembershipOrLeaveGroup(){this.groupUI.isMember?this.leaveGroup():this.groupUI.requestedMembership?this.cancelRequestMembership():this.requestMembership()}requestMembership(){this.membershipService.requestMembership(this.selectedGroupId).then(()=>{this.messageService.add({severity:"success",summary:"Beitrittansfrage verschickt."})}).catch(t=>{this.messageService.add({severity:"error",summary:t})})}cancelRequestMembership(){this.membershipService.cancelMembershipRequest(this.selectedGroupId).then(()=>{this.messageService.add({severity:"success",summary:"Beitrittansfrage zur\xfcckgezogen."})}).catch(t=>{this.messageService.add({severity:"error",summary:t})})}leaveGroup(){let t="";this.authentificationQuery.uuid$.subscribe(s=>{t=s}),t&&this.membershipService.removeMember(t,this.selectedGroupId).then(()=>{this.messageService.add({severity:"success",summary:"Erfolgreich ausgetreten."})}).catch(s=>{this.messageService.add({severity:"error",summary:s})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.ez),e.Y36(T.v),e.Y36(ye.c),e.Y36(g.$),e.Y36(I.J))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-request-membership"]],inputs:{selectedGroupId:"selectedGroupId"},features:[e._Bn([p.ez])],decls:2,vars:1,consts:[["styleClass","max-w-90","position","top-right"],["data-cy","requestedMembershipButton","pButton","","type","button",3,"label","click"]],template:function(t,s){1&t&&(e._UZ(0,"p-toast",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return s.requestMembershipOrLeaveGroup()}),e.qZA()),2&t&&(e.xp6(1),e.s9C("label",s.groupUI.isMember?"Austreten":s.groupUI.requestedMembership?"Anfrage zur\xfcckziehen":"Mitgliedschaft anfragen"))},dependencies:[v.Hq,d.FN]}),o})();var Ge=n(2606),_e=n(1061),Me=n(1669);const Se=function(o,i,t){return{title:o,subtitle:i,imgUrl:t}};function Te(o,i){if(1&o&&e._UZ(0,"app-wiki-header",11),2&o){const t=i.ngIf;e.Q6J("wikiHeader",e.kEZ(1,Se,t.name,t.level,t.avatar_url))}}function Ae(o,i){if(1&o&&e._UZ(0,"app-request-membership",15),2&o){const t=e.oxw(2);e.Q6J("selectedGroupId",t.selectedGroupId)}}function Ze(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.followOrUnfollowGroup())}),e.qZA(),e.YNc(2,Ae,1,1,"app-request-membership",14),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.s9C("label",t.groupUI.isFollowing?"Unfollow":"Follow"),e.xp6(1),e.Q6J("ngIf",t.selectedGroupId)}}const Ce=function(o){return{name:"Mitglieder",number:o}},we=function(o){return{name:"Anr\xe4ge",number:o}},Fe=function(o){return{name:"Follower",number:o}},xe=function(o){return{name:"Veranstaltungen",number:o}},ke=function(o,i,t,s){return[o,i,t,s]};function Le(o,i){if(1&o&&e._UZ(0,"app-key-figures",16),2&o){const t=i.ngIf;e.Q6J("keyFigureList",e.l5B(9,ke,e.VKq(1,Ce,t.member_counter),e.VKq(3,we,t.amendment_counter),e.VKq(5,Fe,t.follower_counter),e.VKq(7,xe,t.events_counter)))}}const Ue=function(o,i,t,s,r,a){return{about:o,contact_email:i,contact_phone:t,street:s,post_code:r,city:a}};function Je(o,i){if(1&o&&e._UZ(0,"app-about-and-contact",17),2&o){const t=i.ngIf;e.Q6J("contactData",e.HTZ(1,Ue,t.description,t.contact_email,t.contact_phone,t.street,t.post_code,t.city))}}const Qe=[{path:"",component:Ie,canActivate:[f.u]},{path:":id",component:(()=>{class o{constructor(t,s,r,a,l,$,Ve){this.route=t,this.groupsService=s,this.groupsServiceState=r,this.messageService=a,this.followingGroupsService=l,this.membershipService=$,this.groupsQuery=Ve,this.menuItemsSpecial=[],this.menuItemsStandart=[],this.menuItemsMegaSpecial=[],this.menuItemsMegaStandart=[],this.selectedGroupId=void 0,this.group$=new y.y}ngOnInit(){this.getSelectedId(),this.selectedGroupId&&(this.checkIfLoggedInUserIsAdmin(this.selectedGroupId),this.getGroupById(this.selectedGroupId),this.checkIfAlreadyFollower(this.selectedGroupId),this.groupsServiceState.getRealTimeChanges(this.selectedGroupId),this.followingGroupsService.getRealTimeChangesIfStillFollower(this.selectedGroupId),this.membershipService.getRealTimeChangesIfStillAdmin(this.selectedGroupId)),this.selectedGroupId&&(this.menuItemsSpecial=N(this.selectedGroupId),this.menuItemsStandart=Z(this.selectedGroupId),this.menuItemsMegaSpecial=O(this.selectedGroupId),this.menuItemsMegaStandart=C(this.selectedGroupId),this.groupsQuery.selectUI$(this.selectedGroupId).subscribe(t=>{console.log(t),console.log("query is following test"),console.log(t?.isFollowing),t&&(this.groupUI=t)}))}getSelectedId(){this.route.paramMap.subscribe(t=>{this.selectedGroupId=String(t.get("id"))})}checkIfLoggedInUserIsAdmin(t){this.groupsService.isLoggedInUserAdmin(t).then(s=>{console.log("*************+++++++"),console.log(s.data.is_admin),this.groupsServiceState.updateIsAdmin(t,s.data.is_admin)}).catch(s=>{})}getGroupById(t){this.groupsServiceState.findGroup(t),this.group$=this.groupsQuery.selectEntity(t)}checkIfAlreadyFollower(t){this.followingGroupsService.isAlreadyFollower(t).then(s=>{console.log("results of follower check"),void 0!==s.data[0]?(console.log("following"),this.selectedGroupId&&this.groupsServiceState.updateIsFollowing(this.selectedGroupId,!0)):this.selectedGroupId&&(console.log("no following"),this.groupsServiceState.updateIsFollowing(this.selectedGroupId,!1))}).catch()}followOrUnfollowGroup(){this.selectedGroupId&&(this.groupUI?.isFollowing?this.followingGroupsService.unfollowTransaction(this.selectedGroupId).then(()=>{this.selectedGroupId&&(this.groupsServiceState.updateIsFollowing(this.selectedGroupId,!1),this.messageService.add({severity:"success",summary:"Du folgst einer neuen Inspirationsquelle."}))}).catch(t=>{this.messageService.add({severity:"error",summary:t})}):this.followingGroupsService.followTransaction(this.selectedGroupId).then(()=>{this.selectedGroupId&&(this.groupsServiceState.updateIsFollowing(this.selectedGroupId,!0),this.messageService.add({severity:"success",summary:"Du folgst einer neuen Inspirationsquelle."}))}).catch(t=>{this.messageService.add({severity:"error",summary:t})}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.gz),e.Y36(A.J),e.Y36(I.J),e.Y36(p.ez),e.Y36(q.s),e.Y36(T.v),e.Y36(g.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-wiki"]],features:[e._Bn([p.ez])],decls:15,vars:16,consts:[[3,"megaMenuItemSpecial","megaMenuItemStandart","specialOrStandart"],["slot","main"],[1,"mb-8"],[3,"wikiHeader",4,"ngIf"],[1,"flex","flex-column"],["class","flex align-items-center justify-content-center",4,"ngIf"],[3,"keyFigureList",4,"ngIf"],[1,"mb-30"],[3,"contactData",4,"ngIf"],["slot","side"],[3,"menuItemsSpecial","menuItemsStandart","specialOrStandart"],[3,"wikiHeader"],[1,"flex","align-items-center","justify-content-center"],["pButton","","type","button","data-cy","followButton",3,"label","click"],[3,"selectedGroupId",4,"ngIf"],[3,"selectedGroupId"],[3,"keyFigureList"],[3,"contactData"]],template:function(t,s){1&t&&(e._UZ(0,"app-menu-bar-secondary-top",0),e.TgZ(1,"app-wrapper-grid")(2,"div",1)(3,"div",2),e.YNc(4,Te,1,5,"app-wiki-header",3),e.ALo(5,"async"),e.TgZ(6,"div",4),e.YNc(7,Ze,3,2,"div",5),e.qZA(),e.YNc(8,Le,1,14,"app-key-figures",6),e.ALo(9,"async"),e.TgZ(10,"div",7),e.YNc(11,Je,1,8,"app-about-and-contact",8),e.ALo(12,"async"),e.qZA()()(),e.TgZ(13,"div",9),e._UZ(14,"app-menu-bar-secondary-right",10),e.qZA()()),2&t&&(e.Q6J("megaMenuItemSpecial",s.menuItemsMegaSpecial)("megaMenuItemStandart",s.menuItemsMegaStandart)("specialOrStandart",s.groupUI.isAdmin),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,10,s.group$)),e.xp6(3),e.Q6J("ngIf",s.groupUI),e.xp6(1),e.Q6J("ngIf",e.lcZ(9,12,s.group$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(12,14,s.group$)),e.xp6(3),e.Q6J("menuItemsSpecial",s.menuItemsSpecial)("menuItemsStandart",s.menuItemsStandart)("specialOrStandart",s.groupUI.isAdmin))},dependencies:[c.O5,v.Hq,be,Y.e,B.U,h.V,Ge.F,_e.T,Me.Z,c.Ov]}),o})(),canActivate:[f.u]},{path:":id/edit",component:re,canActivate:[f.u,b]},{path:":id/edit-overview",component:oe,canActivate:[f.u,b]},{path:":id/edit-follower",component:P,canActivate:[f.u,b]},{path:":id/edit-members",component:W,canActivate:[f.u,b]}];let Re=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(Qe),u.Bz]}),o})();var Ne=n(529),Oe=n(5604),Ye=n(3943),Be=n(2942),$e=n(2263),Ee=n(4747),De=n(4384),ze=n(5021);let He=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,m.u5,m.UX,u.Bz,v.hJ,d.EV,F.j,E.LU,x.$,D.O,z.l,k.A,L.F,V,U.O,K,H.W,Oe.Q,Ye.q,j,Re,_.x,M.n,Be.N,$e.q,Ee.y,De.I,ze.C,Ne.JF]}),o})()}}]);