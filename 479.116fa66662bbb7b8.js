"use strict";(self.webpackChunkpolity=self.webpackChunkpolity||[]).push([[479],{5479:(Ne,x,l)=>{l.r(x),l.d(x,{ProfileModule:()=>De});var m=l(6895),Z=l(8783),P=l(7772),U=l(2665),p=l(8492),b=l(1740),I=l(5593),k=l(5047),u=l(433),A=l(3054),T=l(6919),y=l(8271),d=l(2453),$=l(1683),M=l(5480),J=l(989),R=l(7136),e=l(8274);let z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,d.EV,p.Bz,Z.LU,$.U$,y.F,u.u5,u.UX,b.j,I.hJ,M.x,J.n,R.R]}),o})();var c=l(805),_=l(8306),O=l(9466),w=l(8451),S=l(5754),K=l(9488),f=l(6923),h=l(8092),F=l(9469),Q=l(9762);let V=(()=>{class o{constructor(t,i,n,s,a,v){this.followingService=t,this.messageService=i,this.profileQuery=n,this.profileService=s,this.followingGroupsService=a,this.authentificationQuery=v,this.columns=[],this.followers=[],this.followings=[],this.titleFollower="Follower",this.titleFollowings="Followings",this.noDataFollower="Du hast noch keine Follower.",this.noDataFollowings="Du folgst noch niemanden.",this.profile$=new _.y,this.loggedInID="",this.filterString=""}ngOnInit(){this.getProfileId(),this.profileService.getAllFollowers(this.loggedInID),this.profileService.getAllFollowings(this.loggedInID),this.getFollowingSystem(),this.profileService.getRealTimeChangesFollowerSystem(this.loggedInID),this.profileService.getRealTimeChangesGroupFollowerSystem(this.loggedInID)}getProfileId(){this.authentificationQuery.uuid$.subscribe(t=>{t&&(this.loggedInID=t)})}getFollowingSystem(){console.log("called getAllFollower"),this.profile$=this.profileQuery.selectEntity(this.loggedInID),this.profile$.subscribe(t=>{t?.followers&&(console.log("called requests"),console.log(t.followers),this.followers=[],this.followers=t.followers),t?.followings&&(console.log("called requests"),console.log(t.followings),this.followings=[],this.followings=t.followings)})}getAllFollower(){this.followingService.getAllFollower().then(t=>{this.followers=[],t.data.forEach(i=>{this.followers.push({id:i.profiles.id,name:i.profiles.name,avatar_url:i.profiles.avatar_url})})}).catch(t=>{this.messageService.add({severity:"success",summary:"Fehler beim laden. "+t})})}getAllFollowing(){this.followingService.getAllFollowing().then(t=>{this.followings=[],t.data.forEach(i=>{this.followings.push({id:i.profiles.id,name:i.profiles.name,avatar_url:i.profiles.avatar_url})})}).catch(t=>{this.messageService.add({severity:"success",summary:"Fehler beim laden. "+t})})}onRemoveFollower(t){console.log(t.isGroup),t.isGroup?console.log("group"):(console.log("no group"),this.followingService.removeFollowerTransactionById(t).then(()=>{this.messageService.add({severity:"success",summary:"Follower entfernt."})}).catch(i=>{this.messageService.add({severity:"error",summary:i})}))}onUnFollow(t){const i=t.boolean,n=t.user_id;console.log(i),console.log(this.loggedInID),console.log(n),i?(console.log("group"),this.followingGroupsService.removeFollowerTransaction(this.loggedInID,n).then(()=>{this.messageService.add({severity:"success",summary:"Du folgst der Gruppe nicht mehr."})}).catch(s=>{this.messageService.add({severity:"success",summary:s})})):(console.log("no group"),console.log("onUnFollow"),console.log(t.user_id),this.followingService.unfollowTransaction(t.user_id).then(()=>{this.messageService.add({severity:"success",summary:"Du folgst der Person nicht mehr."})}).catch(s=>{this.messageService.add({severity:"success",summary:s})}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(O.J),e.Y36(c.ez),e.Y36(w.w),e.Y36(S.H),e.Y36(K.s),e.Y36(f.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-follower-management"]],features:[e._Bn([c.ez])],decls:8,vars:9,consts:[["styleClass","max-w-90","position","top-right"],[3,"noTopBar"],["slot","main"],[1,"mb-8"],[1,"mx-4"],["data-cy","backButton",3,"title","link"],[1,"mb-30"],[3,"dataFirstTab","dataSecondTab","titleFirstTab","titleSecondTab","noDataFirstTab","removeItemFromFirstTab","removeItemFromSecontTab"]],template:function(t,i){1&t&&(e._UZ(0,"p-toast",0),e.TgZ(1,"app-wrapper-grid",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"app-back-button",5),e.TgZ(6,"div",6)(7,"app-tab-view-table-lists",7),e.NdJ("removeItemFromFirstTab",function(s){return i.onRemoveFollower(s)})("removeItemFromSecontTab",function(s){return i.onUnFollow(s)}),e.qZA()()()()()()),2&t&&(e.xp6(1),e.Q6J("noTopBar",!0),e.xp6(4),e.Q6J("title","Zur\xfcck")("link","/profile/edit"),e.xp6(2),e.Q6J("dataFirstTab",i.followers)("dataSecondTab",i.followings)("titleFirstTab",i.titleFollower)("titleSecondTab",i.titleFollowings)("noDataFirstTab",i.noDataFollower)("noDataFirstTab",i.noDataFollowings))},dependencies:[d.FN,h.V,F.W,Q.r],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#000}"]}),o})();var j=l(9049),X=l(7427),W=l(4576);function q(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",7)(1,"app-tab-view-table-lists",8),e.NdJ("removeItemFromFirstTab",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.leaveGroup(n))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("dataFirstTab",t.groupsOfUser)("titleFirstTab",t.titleYourGroups)("noDataFirstTab",t.noGroups)("secondTabNeeded",!1)("acceptButtonNeededFirstTab",!1)}}let ee=(()=>{class o{constructor(t,i,n,s,a,v,Ee){this.membershipService=t,this.authentificationQuery=i,this.messageService=n,this.groupsService=s,this.profileService=a,this.profileQuery=v,this.profileStore=Ee,this.selectedGroupId="",this.profile$=new _.y,this.groupsOfUser=[],this.link="",this.titleYourGroups="Deine Gruppen",this.noGroups="Du bist in noch keiner Gruppe Mitglied.",this.loggedInID=""}ngOnInit(){this.link="/profile/edit",this.authentificationQuery.uuid$.subscribe(t=>{this.loggedInID=t}),this.getAllGroups(),this.loggedInID&&(this.profile$=this.profileQuery.selectEntity(this.loggedInID),this.profile$.subscribe(t=>{t&&(this.groupsOfUser=t.groups)}),this.profileService.getRealTimeChangesGroupsOfProfile(this.loggedInID))}leaveGroup(t){console.log("test"),console.log("membership_id"),console.log(t.id),console.log("user:id"),console.log(this.loggedInID),console.log("group:id"),console.log(t.user_id),this.loggedInID&&this.membershipService.removeMemberByMembershipId(t.id,this.loggedInID,t.user_id).then(()=>{this.getAllGroups(),this.messageService.add({severity:"success",summary:"Du bist aus einer Gruppe ausgetreten."})}).catch(i=>{this.messageService.add({severity:"error",summary:i})})}getAllGroups(){console.log(1),this.groupsService.getAllGroupsOfId().then(t=>{let i=[];console.log("groupList"),console.log(t),t.data.forEach(n=>{i.push({id:n.id,name:n.groups.name,avatar_url:n.groups.avatar_url,user_id:n.group_id,isGroup:!0})}),this.profileStore.upsert(this.loggedInID,{groups:i})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.v),e.Y36(f.c),e.Y36(c.ez),e.Y36(X.J),e.Y36(S.H),e.Y36(w.w),e.Y36(W.s))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-membership-user-management"]],features:[e._Bn([c.ez])],decls:7,vars:4,consts:[["styleClass","max-w-90","position","top-right"],[3,"noTopBar"],["slot","main"],[1,"mb-8"],[1,"mx-4"],["data-cy","backButton",3,"title","link"],["class","mb-30",4,"ngIf"],[1,"mb-30"],[3,"dataFirstTab","titleFirstTab","noDataFirstTab","secondTabNeeded","acceptButtonNeededFirstTab","removeItemFromFirstTab"]],template:function(t,i){1&t&&(e._UZ(0,"p-toast",0),e.TgZ(1,"app-wrapper-grid",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"app-back-button",5),e.YNc(6,q,2,5,"div",6),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("noTopBar",!0),e.xp6(4),e.Q6J("title","Zur\xfcck")("link",i.link),e.xp6(1),e.Q6J("ngIf",i.groupsOfUser))},dependencies:[m.O5,d.FN,h.V,F.W,Q.r]}),o})();var g=l(9028),C=l(5861),D=l(529),te=l(9338);function oe(o,r){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.profile.name)}}function ie(o,r){if(1&o&&e._UZ(0,"p-avatar",30),2&o){const t=e.oxw(2);e.Q6J("image",t.profile.avatar_url)}}function ne(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"h5"),e._uU(2,"Pers\xf6nliche Daten"),e.qZA(),e.YNc(3,oe,2,1,"p",9),e.TgZ(4,"div",10)(5,"div",11)(6,"span",12)(7,"input",13),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.profile.name=n)}),e.qZA(),e.TgZ(8,"label",14),e._uU(9,"Name"),e.qZA()()(),e.TgZ(10,"div",11)(11,"span",12)(12,"input",15),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.profile.website=n)}),e.qZA(),e.TgZ(13,"label",14),e._uU(14,"Website"),e.qZA()()(),e.TgZ(15,"div",16)(16,"span",12)(17,"textarea",17,18),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.profile.about=n)}),e.qZA(),e.TgZ(19,"label",14),e._uU(20,"\xdcber mich"),e.qZA()()()(),e.TgZ(21,"div")(22,"h5"),e._uU(23,"Profile Foto"),e.qZA(),e.YNc(24,ie,1,1,"p-avatar",19),e.TgZ(25,"p-fileUpload",20,21),e.NdJ("uploadHandler",function(n){e.CHM(t);const s=e.MAs(26),a=e.oxw();return e.KtG(a.updateProfilePhoto(n,s))}),e.qZA()(),e.TgZ(27,"h5"),e._uU(28,"Kontaktm\xf6glichkeiten"),e.qZA(),e.TgZ(29,"div",10)(30,"div",11)(31,"span",12)(32,"input",22),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.profile.contact_email=n)}),e.qZA(),e.TgZ(33,"label",14),e._uU(34,"Email"),e.qZA()()(),e.TgZ(35,"div",11)(36,"span",12)(37,"input",23),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.profile.contact_phone=n)}),e.qZA(),e.TgZ(38,"label",14),e._uU(39,"Phone"),e.qZA()()()(),e.TgZ(40,"h5"),e._uU(41,"Adresse"),e.qZA(),e.TgZ(42,"div",10)(43,"div",11)(44,"span",12)(45,"input",24),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.profile.street=n)}),e.qZA(),e.TgZ(46,"label",14),e._uU(47,"Street"),e.qZA()()(),e.TgZ(48,"div",11)(49,"span",12)(50,"input",25),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.profile.post_code=n)}),e.qZA(),e.TgZ(51,"label",14),e._uU(52,"Post Code"),e.qZA()()(),e.TgZ(53,"div",11)(54,"span",12)(55,"input",26),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.profile.city=n)}),e.qZA(),e.TgZ(56,"label",14),e._uU(57,"City"),e.qZA()()()(),e.TgZ(58,"div",27)(59,"div",28)(60,"button",29),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateContactInformation(n.profile))}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.profile),e.xp6(4),e.Q6J("ngModel",t.profile.name),e.xp6(5),e.Q6J("ngModel",t.profile.website),e.xp6(5),e.Q6J("autoResize",!0)("ngModel",t.profile.about),e.xp6(7),e.Q6J("ngIf",t.profile.avatar_url),e.xp6(1),e.Q6J("auto",!0)("customUpload",!0),e.xp6(7),e.Q6J("ngModel",t.profile.contact_email),e.xp6(5),e.Q6J("ngModel",t.profile.contact_phone),e.xp6(8),e.Q6J("ngModel",t.profile.street),e.xp6(5),e.Q6J("ngModel",t.profile.post_code),e.xp6(5),e.Q6J("ngModel",t.profile.city),e.xp6(5),e.s9C("label",t.loading?"Loading ...":"Update"),e.Q6J("disabled",t.loading)}}let le=(()=>{class o{constructor(t,i,n,s,a){this.messageService=t,this.storageService=i,this.profileQuery=n,this.profileService=s,this.authentificationQuery=a,this.loading=!0,this.loggedInUserId=null,this.uploading=!1}ngOnInit(){this.getLoggedInUserId$(),this.getSelectedProfile(),this.loggedInUserId&&(this.test2=this.profileService.getRealTimeChanges(this.loggedInUserId))}getLoggedInUserId$(){this.authentificationQuery.uuid$.subscribe(t=>{t&&(this.loggedInUserId=t)})}getSelectedProfile(){this.loggedInUserId&&(this.test=this.profileQuery.selectProfileById(this.loggedInUserId).subscribe(t=>{if(t){const i={id:t.id,amendment_counter:t.amendment_counter,follower_counter:t.follower_counter,following_counter:t.following_counter,groups_counter:t.groups_counter,name:t.name,website:t.website,avatar_url:t.avatar_url,contact_email:t.contact_email,contact_phone:t.contact_phone,street:t.street,post_code:t.post_code,city:t.city,about:t.about,fts:t.fts};console.log("new Profile in profile edit component fetched"),console.log(t),this.profile=JSON.parse(JSON.stringify(i)),this.loading=!1}}))}updateContactInformation(t){var i=this;return(0,C.Z)(function*(){try{i.loading=!0,yield i.profileService.update(i.loggedInUserId,t),i.messageService.add({severity:"success",summary:"Update erfolgreich."})}catch(n){i.messageService.add({severity:"error",summary:n})}finally{i.loading=!1}})()}updateProfilePhoto(t,i){var n=this;return(0,C.Z)(function*(){if(n.profile)try{n.uploading=!0;const s=n.storageService.createFilePath(t);try{const a=yield n.storageService.uploadImg(s,n.profile.avatar_url||void 0,"avatars");n.profile.avatar_url=a,yield n.updateContactInformation({avatar_url:a}),i.clear(),n.messageService.add({severity:"success",summary:"Upload des Avatars war erfolgreich."})}catch(a){n.messageService.add({severity:"error",summary:a})}}catch(s){n.messageService.add({severity:"error",summary:s.message})}finally{n.uploading=!1}})()}ngOnDestroy(){console.log("destroyed"),this.test&&(this.test.unsubscribe(),console.log("1 destroyed")),this.test2&&(this.test2.unsubscribe(),console.log("2 destroyed"))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.ez),e.Y36(te.V),e.Y36(w.w),e.Y36(S.H),e.Y36(f.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-profile"]],features:[e._Bn([c.ez,D.eN])],decls:9,vars:4,consts:[["styleClass","max-w-90","position","top-right"],[3,"noTopBar"],["slot","main"],[1,"mb-8"],[1,"mx-4"],["data-cy","backButton",3,"title","link"],["class","mt-4",4,"ngIf"],["slot","side"],[1,"mt-4"],[4,"ngIf"],[1,"grid"],[1,"col-12","md:col-6"],[1,"p-float-label"],["type","text","pInputText","","name","name","data-cy","name",1,"w-full",3,"ngModel","ngModelChange"],["for","float-input"],["type","url","pInputText","","name","website","data-cy","website",1,"w-full",3,"ngModel","ngModelChange"],[1,"col-12"],["pInputTextarea","","name","about","data-cy","about",1,"w-full",3,"autoResize","ngModel","ngModelChange"],["about",""],[3,"image",4,"ngIf"],["name","myfile[]","accept","image/*","data-cy","imageUpload",1,"full-w",3,"auto","customUpload","uploadHandler"],["fileUploader",""],["type","email","pInputText","","name","contact_email","data-cy","contactEmail",1,"w-full",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","contact_phone","data-cy","contactPhone",1,"w-full",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","street","data-cy","street",1,"w-full",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","post_code","data-cy","postCode",1,"w-full",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","city","data-cy","city",1,"w-full",3,"ngModel","ngModelChange"],[1,"flex","flex-column"],[1,"flex","align-items-center","justify-content-center"],["pButton","","type","button","data-cy","updateProfileInformationButton",3,"label","disabled","click"],[3,"image"]],template:function(t,i){1&t&&(e.TgZ(0,"p-toast",0),e._uU(1,">"),e.qZA(),e.TgZ(2,"app-wrapper-grid",1)(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"app-back-button",5),e.YNc(7,ne,61,15,"div",6),e.qZA()()(),e._UZ(8,"div",7),e.qZA()),2&t&&(e.xp6(2),e.Q6J("noTopBar",!0),e.xp6(4),e.Q6J("title","Zur\xfcck")("link","/profile/edit"),e.xp6(1),e.Q6J("ngIf",i.profile))},dependencies:[m.O5,b.o,I.Hq,u.Fj,u.JJ,u.On,A.g,T.p,y.q,d.FN,h.V,F.W],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#000}"]}),o})();function G(o){return[{label:"\xdcBERSICHT",routerLink:[`/profile/${o}`],routerLinkActiveOptions:{exact:!0}}]}function Y(o){return[{icon:"pi pi-fw pi-home",routerLink:[`/profile/${o}`],routerLinkActiveOptions:{exact:!0}}]}var se=l(4593),B=l(4479),H=l(4524),re=l(6355),ae=l(3078),ce=l(8644);function de(o,r){1&o&&(e.TgZ(0,"div",14),e._uU(1,"Logout"),e.qZA())}let pe=(()=>{class o{constructor(t,i,n){this.authentificationService=t,this.authentificationQuery=i,this.router=n,this.menuItemsSpecial=[],this.menuItemsStandart=[],this.menuItemsMegaSpecial=[],this.menuItemsMegaStandart=[],this.loggedInUserId="",this.isOwner=!0}ngOnInit(){this.authentificationQuery.uuid$.subscribe(t=>{t&&(this.loggedInUserId=t,this.menuItemsSpecial=[{label:"\xdcBERSICHT",routerLink:["/profile"],routerLinkActiveOptions:{exact:!0},id:"overview-cy"},{label:"\xc4NDERN",routerLink:["/profile/edit"],routerLinkActiveOptions:{exact:!0},id:"edit-cy"}],this.menuItemsStandart=G(this.loggedInUserId),this.menuItemsMegaSpecial=[{icon:"pi pi-fw pi-home",routerLink:["/profile"],routerLinkActiveOptions:{exact:!0},id:"overview-cy-mob"},{icon:"pi pi-fw pi-user-edit",routerLink:["/profile/edit"],routerLinkActiveOptions:{exact:!0},id:"edit-cy-mob"}],this.menuItemsMegaStandart=Y(this.loggedInUserId))})}signOut(){var t=this;return(0,C.Z)(function*(){yield t.authentificationService.signOut(),t.router.navigate(["/login"])})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(se.g),e.Y36(f.c),e.Y36(p.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit"]],decls:17,vars:14,consts:[[3,"megaMenuItemSpecial","megaMenuItemStandart","specialOrStandart"],["slot","main"],[1,"mb-8"],[1,"mx-4"],[3,"headline"],["data-cy","profile-edit",3,"title","link"],["data-cy","follower-edit",3,"title","link"],["data-cy","groups-edit",3,"title","link"],[1,"text-center","on-dark-surface-in-dark-theme"],[1,"cursor-pointer",3,"click"],["severity","custom","data-cy","logout"],["pTemplate",""],["slot","side"],[3,"menuItemsSpecial","menuItemsStandart","specialOrStandart"],[1,"ml-2"]],template:function(t,i){1&t&&(e._UZ(0,"app-menu-bar-secondary-top",0),e.TgZ(1,"app-wrapper-grid")(2,"div",1)(3,"div",2)(4,"div",3),e._UZ(5,"app-headline-of-list",4)(6,"app-list-element",5)(7,"app-list-element",6)(8,"app-list-element",7),e.TgZ(9,"div",8),e._UZ(10,"app-switch-theme"),e.qZA(),e._UZ(11,"app-headline-of-list",4),e.TgZ(12,"a",9),e.NdJ("click",function(){return i.signOut()}),e.TgZ(13,"p-messages",10),e.YNc(14,de,2,0,"ng-template",11),e.qZA()()()()(),e.TgZ(15,"div",12),e._UZ(16,"app-menu-bar-secondary-right",13),e.qZA()()),2&t&&(e.Q6J("megaMenuItemSpecial",i.menuItemsMegaSpecial)("megaMenuItemStandart",i.menuItemsMegaStandart)("specialOrStandart",i.isOwner),e.xp6(5),e.Q6J("headline","INHALTE"),e.xp6(1),e.Q6J("title","Profil")("link","/profile/edit/profile"),e.xp6(1),e.Q6J("title","Follower-Management")("link","/profile/edit/follower"),e.xp6(1),e.Q6J("title","Gruppen-Management")("link","/profile/edit/groups"),e.xp6(3),e.Q6J("headline","INHALTE"),e.xp6(5),e.Q6J("menuItemsSpecial",i.menuItemsSpecial)("menuItemsStandart",i.menuItemsStandart)("specialOrStandart",i.isOwner))},dependencies:[c.jx,P.V,h.V,B.e,H.U,re.g,ae.d,ce.o],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#000}"]}),o})();var ue=l(2606),ge=l(1061),me=l(1669);const fe=function(o,r){return{title:o,subtitle:"TODO",imgUrl:r}};function he(o,r){if(1&o&&e._UZ(0,"app-wiki-header",13),2&o){const t=e.oxw();e.Q6J("wikiHeader",e.WLB(1,fe,t.profile.name,t.profile.avatar_url))}}function ve(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.followOrUnfollowProfile())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.s9C("label",t.profileUI.isFollowing?"Unfollow":"Follow")}}const Ie=function(o){return{name:"Antr\xe4ge",number:o}},ye=function(o){return{name:"Follower",number:o}},we=function(o){return{name:"Following",number:o}},Se=function(o){return{name:"Gruppen",number:o}},be=function(o,r,t,i){return[o,r,t,i]};function Te(o,r){if(1&o&&e._UZ(0,"app-key-figures",16),2&o){const t=e.oxw();e.Q6J("keyFigureList",e.l5B(9,be,e.VKq(1,Ie,t.profile.amendment_counter),e.VKq(3,ye,t.profile.follower_counter),e.VKq(5,we,t.profile.following_counter),e.VKq(7,Se,t.profile.groups_counter)))}}const Me=function(o,r,t,i,n,s){return{about:o,contact_email:r,contact_phone:t,street:i,post_code:n,city:s}};function _e(o,r){if(1&o&&e._UZ(0,"app-about-and-contact",17),2&o){const t=e.oxw();e.Q6J("contactData",e.HTZ(1,Me,t.profile.about,t.profile.contact_email,t.profile.contact_phone,t.profile.street,t.profile.post_code,t.profile.city))}}let L=(()=>{class o{constructor(t,i,n,s,a,v){this.authentificationQuery=t,this.route=i,this.followingservice=n,this.messageService=s,this.profileService=a,this.profileQuery=v,this.menuItemsSpecial=[],this.menuItemsStandart=[],this.menuItemsMegaSpecial=[],this.menuItemsMegaStandart=[],this.profile$=new _.y,this.selectedProfileId=null,this.loggedInUserId=null,this.calledRealTime=!1}ngOnInit(){this.getLoggedInUserId$(),this.getSelectedId(),this.selectedProfileId&&this.profileService.checkIfIsOwner(this.selectedProfileId),this.selectedProfileId&&this.profileQuery.selectUI$(this.selectedProfileId).subscribe(t=>{t&&(this.profileUI=t)}),this.checkIfAlreadyFollower(),this.selectedProfileId&&(this.profileQuery.getEntity(this.selectedProfileId)?(console.log("already in store"),this.test=this.profileQuery.selectEntity(this.selectedProfileId).subscribe(i=>{i&&(console.log("loaded profile data from store again"),console.log(i),this.profile=i)})):this.selectedProfileId&&(console.log("data not in store, fetched data and activate Realtime subscription"),this.getSelectedProfile()),this.test3=this.profileService.getRealTimeChanges(this.selectedProfileId),this.test4=this.profileService.getRealTimeChangesIfStillFollower(this.selectedProfileId)),this.selectedProfileId&&(this.menuItemsSpecial=[{label:"\xdcBERSICHT",routerLink:["/profile"],routerLinkActiveOptions:{exact:!0},id:"overview-cy"},{label:"\xc4NDERN",routerLink:["/profile/edit"],routerLinkActiveOptions:{exact:!0},id:"edit-cy"}],this.menuItemsStandart=G(this.selectedProfileId),this.menuItemsMegaSpecial=[{icon:"pi pi-fw pi-home",routerLink:["/profile"],routerLinkActiveOptions:{exact:!0},id:"overview-cy-mob"},{icon:"pi pi-fw pi-user-edit",routerLink:["/profile/edit"],routerLinkActiveOptions:{exact:!0},id:"edit-cy-mob"}],this.menuItemsMegaStandart=Y(this.selectedProfileId))}getLoggedInUserId$(){this.authentificationQuery.uuid$.subscribe(t=>{t&&(this.loggedInUserId=t)})}getSelectedId(){this.route.paramMap.subscribe(t=>{let i=String(t.get("id"));"null"===i?(console.log("no route"),this.selectedProfileId=this.loggedInUserId,console.log(this.selectedProfileId)):this.selectedProfileId=i})}getSelectedProfile(){this.selectedProfileId&&(console.log("profile-id"),console.log(this.selectedProfileId),this.profileService.add(this.selectedProfileId),this.test2=this.profileQuery.selectProfileById(this.selectedProfileId).subscribe(t=>{t&&(console.log("new profile in profile component fetched"),console.log(t),this.profile=t)}))}followOrUnfollowProfile(){this.selectedProfileId&&(this.profileUI.isFollowing?this.followingservice.unfollowTransaction(this.selectedProfileId).then(()=>{this.selectedProfileId&&(this.profileService.updateIsFollowing(this.selectedProfileId,!1),this.messageService.add({severity:"success",summary:"Du folgst einer neuen Inspirationsquelle."}))}).catch(t=>{this.messageService.add({severity:"error",summary:t})}):this.followingservice.followTransaction(this.selectedProfileId).then(()=>{this.selectedProfileId&&(this.profileService.updateIsFollowing(this.selectedProfileId,!0),this.messageService.add({severity:"success",summary:"Du folgst einer neuen Inspirationsquelle."}))}).catch(t=>{this.messageService.add({severity:"error",summary:t})}))}checkIfAlreadyFollower(){this.selectedProfileId&&this.followingservice.isAlreadyFollower(this.selectedProfileId).then(t=>{void 0!==t.data[0]?(console.log("following"),this.selectedProfileId&&this.profileService.updateIsFollowing(this.selectedProfileId,!0)):this.selectedProfileId&&this.profileService.updateIsFollowing(this.selectedProfileId,!1)}).catch()}ngOnDestroy(){console.log("destroyed"),this.test&&(this.test.unsubscribe(),console.log("1 destroyed")),this.test2&&(this.test2.unsubscribe(),console.log("2 destroyed")),this.test3&&(this.test3.unsubscribe(),console.log("3 destroyed")),this.test4&&(this.test4.unsubscribe(),console.log("4 destroyed"))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.c),e.Y36(p.gz),e.Y36(O.J),e.Y36(c.ez),e.Y36(S.H),e.Y36(w.w))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile"]],features:[e._Bn([c.ez])],decls:15,vars:11,consts:[[3,"megaMenuItemSpecial","megaMenuItemStandart","specialOrStandart"],["styleClass","max-w-90","position","top-right"],[3,"noTopBar"],["slot","main"],[1,"mb-8"],[3,"wikiHeader",4,"ngIf"],[1,"flex","flex-column"],["class","flex align-items-center justify-content-center",4,"ngIf"],[3,"keyFigureList",4,"ngIf"],[1,"mb-30"],[3,"contactData",4,"ngIf"],["slot","side"],[3,"menuItemsSpecial","menuItemsStandart","specialOrStandart"],[3,"wikiHeader"],[1,"flex","align-items-center","justify-content-center"],["pButton","","type","button","data-cy","followButton",3,"label","click"],[3,"keyFigureList"],[3,"contactData"]],template:function(t,i){1&t&&(e._UZ(0,"app-menu-bar-secondary-top",0),e.TgZ(1,"p-toast",1),e._uU(2,">"),e.qZA(),e.TgZ(3,"app-wrapper-grid",2)(4,"div",3)(5,"div",4),e.YNc(6,he,1,4,"app-wiki-header",5),e.TgZ(7,"div",6),e.YNc(8,ve,2,1,"div",7),e.qZA(),e.YNc(9,Te,1,14,"app-key-figures",8),e.TgZ(10,"div",9),e.YNc(11,_e,1,8,"app-about-and-contact",10),e.qZA(),e._UZ(12,"div"),e.qZA()(),e.TgZ(13,"div",11),e._UZ(14,"app-menu-bar-secondary-right",12),e.qZA()()),2&t&&(e.Q6J("megaMenuItemSpecial",i.menuItemsMegaSpecial)("megaMenuItemStandart",i.menuItemsMegaStandart)("specialOrStandart",i.profileUI.isOwner),e.xp6(3),e.Q6J("noTopBar",!1),e.xp6(3),e.Q6J("ngIf",i.profile),e.xp6(2),e.Q6J("ngIf",i.profileUI),e.xp6(1),e.Q6J("ngIf",i.profile),e.xp6(2),e.Q6J("ngIf",i.profile),e.xp6(3),e.Q6J("menuItemsSpecial",i.menuItemsSpecial)("menuItemsStandart",i.menuItemsStandart)("specialOrStandart",i.profileUI.isOwner))},dependencies:[m.O5,I.Hq,d.FN,h.V,B.e,H.U,ue.F,ge.T,me.Z]}),o})();const Fe=[{path:"",component:L,canActivate:[g.u]},{path:"edit",component:pe,canActivate:[g.u]},{path:"edit/profile",component:le,canActivate:[g.u]},{path:"edit/follower",component:V,canActivate:[g.u]},{path:"edit/groups",component:ee,canActivate:[g.u]},{path:":id",component:L,canActivate:[g.u]}];let Ce=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(Fe),p.Bz]}),o})();var xe=l(5604),Ze=l(3943),Pe=l(2942),Ue=l(4384),Ae=l(5021),Je=l(2263),Oe=l(4303),Qe=l(4747);let De=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,Z.LU,P.$,U.O,p.Bz,b.j,k.L$,I.hJ,u.u5,A.A,T.O,y.F,d.EV,z,Ce,D.JF,M.x,xe.Q,Ze.q,d.EV,M.x,J.n,y.F,T.O,Pe.N,Qe.y,U.O,Ue.I,Ae.C,Je.q,Oe.B]}),o})()}}]);